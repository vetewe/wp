!function(t,r){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(exports=module.exports=r(0,exports)):"function"==typeof define&&define.amd?define(["exports"],function(e){t.Lockr=r(0,e)}):t.Lockr=r(0,{})}(this,function(e,i){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,r=Number(arguments[1])||0;for((r=r<0?Math.ceil(r):Math.floor(r))<0&&(r+=t);r<t;r++)if(r in this&&this[r]===e)return r;return-1}),i.prefix="",i._getPrefixedKey=function(e,t){return(t=t||{}).noPrefix?e:this.prefix+e},i.set=function(t,r,e){var o=this._getPrefixedKey(t,e);try{localStorage.setItem(o,JSON.stringify({data:r}))}catch(e){console&&console.warn("Lockr didn't successfully save the '{"+t+": "+r+"}' pair, because the localStorage is full.")}},i.get=function(e,t,r){var o,n=this._getPrefixedKey(e,r);try{o=JSON.parse(localStorage.getItem(n))}catch(e){o=localStorage[n]?{data:localStorage.getItem(n)}:null}return o?"object"==typeof o&&void 0!==o.data?o.data:void 0:t},i.sadd=function(t,r,e){var o,n=this._getPrefixedKey(t,e),a=i.smembers(t);if(-1<a.indexOf(r))return null;try{a.push(r),o=JSON.stringify({data:a}),localStorage.setItem(n,o)}catch(e){console.log(e),console&&console.warn("Lockr didn't successfully add the "+r+" to "+t+" set, because the localStorage is full.")}},i.smembers=function(e,t){var r,o=this._getPrefixedKey(e,t);try{r=JSON.parse(localStorage.getItem(o))}catch(e){r=null}return r&&r.data?r.data:[]},i.sismember=function(e,t,r){return-1<i.smembers(e).indexOf(t)},i.keys=function(){var t=[],e=Object.keys(localStorage);return 0===i.prefix.length?e:(e.forEach(function(e){-1!==e.indexOf(i.prefix)&&t.push(e.replace(i.prefix,""))}),t)},i.getAll=function(e){var t=i.keys();return e?t.reduce(function(e,t){var r={};return r[t]=i.get(t),e.push(r),e},[]):t.map(function(e){return i.get(e)})},i.srem=function(t,r,e){var o,n=this._getPrefixedKey(t,e),a=i.smembers(t,r),e=a.indexOf(r);-1<e&&a.splice(e,1),o=JSON.stringify({data:a});try{localStorage.setItem(n,o)}catch(e){console&&console.warn("Lockr couldn't remove the "+r+" from the set "+t)}},i.rm=function(e){e=this._getPrefixedKey(e);localStorage.removeItem(e)},i.flush=function(){i.prefix.length?i.keys().forEach(function(e){localStorage.removeItem(i._getPrefixedKey(e))}):localStorage.clear()},i});